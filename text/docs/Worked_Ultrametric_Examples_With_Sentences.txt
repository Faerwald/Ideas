Title: Worked Ultrametric Examples With Sentences
Date:  2025-08-11
Source: Worked_Ultrametric_Examples_With_Sentences.pdf
Worked Ultrametric Examples With Sentences
  Legend. We compare strings as sequences of characters (letters, spaces, punctuation). If two
  strings match for the first k characters and differ at the next, the ultrametric distance is
                                                    1
                                      œÅ(x, y) =                  (0 < 1/m < 1).
                                                    mk
  In the strips below, green = matching prefix, red = first differing character. We render a space
  as ¬∑.
A. Example 1.1 (from the book): four sentences X,Y,Z,W
Alphabet and rule. Alphabet = English letters + space + punctuation + ‚Äúblank‚Äù symbol used only
to pad the end. Distance: if the longest common prefix (LCP) length is k, then œÅ = 1/mk .
Sentences (verbatim):
                             X    :   I have to go to the University
                             Y    :   I go to the University
                             Z    :   I go to a shop
                             W    :   He has to go to the University
A1. Pairwise LCPs ‚áí distances (all six pairs)
Below, the top row shows indices 1, 2, . . .. The next two rows show characters. Green boxes are the
matching prefix; the first red box is the first mismatch.
X vs Y .
                               index        1        2           3       4
                               X            I        ¬∑           h       a       k=2
                               Y            I        ¬∑           g       o
       1
  œÅ=      (= 1/m2 )
       m2
Y vs Z. Common prefix is ‚ÄúI¬∑go¬∑to¬∑‚Äù (8 characters). First mismatch: t vs a.
                index    1    2         3       4        5           6       7    8    9
                Y       I     ¬∑         g       o        ¬∑           t       o    ¬∑    t   k=8
                Z       I     ¬∑         g       o        ¬∑           t       o    ¬∑    a
       1
  œÅ=      (= 1/m8 )
       m8
                                                             1
X vs Z.
                                 index       1   2       3   4
                                 X           I   ¬∑       h   a     k=2
                                 Z           I   ¬∑       g   o
        1
   œÅ=      (= 1/m2 )
        m2
X vs W . First character differs: I vs H.
                                         index   1       2
                                         X       I       ¬∑   k=0
                                         W       H       e
        1
   œÅ=      (= 1)
        m0
Y vs W .
                                         index   1       2
                                         Y       I       ¬∑   k=0
                                         W       H       e
        1
   œÅ=      (= 1)
        m0
Z vs W .
                                         index   1       2
                                         Z       I       ¬∑   k=0
                                         W       H       e
        1
   œÅ=      (= 1)
        m0
A2. Distance table for X, Y, Z, W (character metric)
                                              X     Y      Z   W
                                      X        0   1/m 1/m
                                                       2     2
                                                               1
                                      Y      1/m 2
                                                     0   1/m 8
                                                               1
                                      Z      1/m2 1/m8     0   1
                                      W        1     1     1   0
A3. Balls and the ‚Äúfirst bits matter‚Äù point
Let B1/mk (a) = {x : œÅ(x, a) ‚â§ 1/mk }.
  ‚Ä¢ B1/m (Y ) = all texts starting with I. It contains X, Y, Z but not W .
  ‚Ä¢ B1/m2 (Y ) = all texts starting with I¬∑. It contains X, Y, Z; excludes W .
  ‚Ä¢ B1/m8 (Y ) = all texts starting with I¬∑go¬∑to¬∑. It contains Y, Z only.
This is exactly the book‚Äôs message: the earliest characters partition the space into far clusters.
                                                     2
A4. Strong triangle inequality (check on the numbers)
Take X, Y, Z:
                                            1             1 1                           1
                                                                               
                               œÅ(X, Z) = 2 ‚â§ max 2 , 8                              =      .
                                           m             m m                            m2
Equality holds, so the ultrametric condition is satisfied.
B. Example 2 (your page): four sentences S1‚ÄìS4
Sentences (exact text we‚Äôll use):
                                     S1 :   she‚Äôs a shapeshifter
                                     S2 :   she‚Äôs a transformer
                                     S3 :   she‚Äôs the key
                                     S4 :   she transformed
B1. Pairwise LCPs ‚áí distances
S1 vs S2. Common prefix ‚Äúshe‚Äôs¬∑a¬∑‚Äù (8 chars). Mismatch next: s vs t.
                index     1     2       3       4           5           6       7       8      9
                S1        s     h     e         ‚Äô           s           ¬∑       a       ¬∑      s     k=8
                S2        s     h     e         ‚Äô           s           ¬∑       a       ¬∑      t
       1
  œÅ=      (= 1/m8 )
       m8
S1 vs S3. Common prefix ‚Äúshe‚Äôs¬∑‚Äù (6 chars). Next: a vs t.
                        index   1       2           3       4           5       6       7
                        S1      s       h       e           ‚Äô           s       ¬∑       a      k=6
                        S3      s       h       e           ‚Äô           s       ¬∑       t
       1
  œÅ=      (= 1/m6 )
       m6
S1 vs S4. Common prefix ‚Äúshe‚Äù (3 chars). Next: ‚Äô vs ¬∑.
                                index       1           2           3       4
                                S1          s           h           e       ‚Äô       k=3
                                S4          s           h           e       ¬∑
       1
  œÅ=      (= 1/m3 )
       m3
S2 vs S3. Same as above: ‚Äúshe‚Äôs¬∑‚Äù (6), then a vs t.
                                                            k=6
       1
  œÅ=      (= 1/m6 )
       m6
                                                                3
S2 vs S4. Common prefix ‚Äúshe‚Äù (3), then ‚Äô vs ¬∑.
                                                  k=3
        1
   œÅ=      (= 1/m3 )
        m3
S3 vs S4. Common prefix ‚Äúshe‚Äù (3), then ‚Äô vs ¬∑.
                                                  k=3
        1
   œÅ=      (= 1/m3 )
        m3
B2. Distance table for S1, S2, S3, S4 (character metric)
                                          S1    S2    S3    S4
                                    S1     0   1/m 1/m 1/m3
                                                   8     6
                                    S2   1/m 8
                                                 0   1/m6 1/m3
                                    S3   1/m6 1/m6     0   1/m3
                                    S4   1/m3 1/m3 1/m3      0
B3. Balls and hierarchy you can see
  ‚Ä¢ B1/m3 (S1) = all strings starting with she. It contains S1, S2, S3, S4.
  ‚Ä¢ B1/m6 (S1) = all strings starting with she‚Äôs¬∑. It contains S1, S2, S3 (but not S4).
  ‚Ä¢ B1/m8 (S1) = all strings starting with she‚Äôs¬∑a¬∑. It contains S1, S2 (but not S3, S4).
Because ultrametric balls are nested or disjoint, you can read this as a clean, tree-shaped refinement:
                                     she ‚äÉ she‚Äôs¬∑ ‚äÉ she‚Äôs¬∑a¬∑.
B4. Strong triangle inequality (checked on your strings)
Consider S1, S2, S3:
                                           1       1 1                    1
                                                                 
                               œÅ(S1, S3) = 6 ‚â§ max 8 , 6              =      .
                                          m       m m                     m6
Consider S1, S4, S2:
                                             1            1 1           1
                                                                 
                              œÅ(S1, S4) = 3 ‚â§ max 8 , 3 = 3 .
                                            m            m m           m
Both hold with equality, visually reflecting that two longest sides tie in each ‚Äútriangle.‚Äù
                                                        ‚ü®Jason Agamemnon Sokaris | .F.A.E.R.W.A.L.D‚ü©
                                                    4